<%= render 'shared/navbar' %>

<div class="top-div">
  <div id="map" data-markers="<%= @markers.to_json %>" style="width: 100%;
    height: 80vh;"></div>
</div>

<div class="meeting-point"><p>📍 <%= @geographic_center %></p></div>

<div>

<%= simple_form_for restaurants_path do |f| %>
<% food_category = Restaurant::CATEGORY %>

  <fieldset class="form-group radio_buttons required restaurants_food_category">
    <legend class="col-form-label pt-0">Food category <abbr title="required">*</abbr></legend>
    <input type="hidden" name="/restaurants[food_category]" value="">
    <div class="wrapper">
      <% food_category.each do |input| %>
        <div class="form-check">
          <input class="form-check-input radio_buttons required" type="radio" value="<%= input %>" name="/restaurants[food_category]" id="_restaurants_food_category_<%= input %>">
          <label class="form-check-label collection_radio_buttons" for="_restaurants_food_category_<%= input %>"><%= input %></label>
        </div>
      <% end %>
    </div>
  </fieldset>


  <fieldset class="form-group radio_buttons required restaurants_rating">
    <legend class="col-form-label pt-0">Rating <abbr title="required">*</abbr></legend>
    <input type="hidden" name="/restaurants[rating]" value="">
    <div class="rating-form">
      <% Restaurant::RATINGS.each do |input| %>
        <div class="form-check">
          <input class="form-check-input radio_buttons required" type="radio" value="<%= input %>" name="/restaurants[rating]" id="_restaurants_rating_<%= input %>">
          <label class="form-check-label collection_radio_buttons" for="_restaurants_rating_<%= input %>"><i class="fas fa-star"></i>
          </label>
        </div>
      <% end %>
    </div>
  </fieldset>


  <fieldset class="form-group radio_buttons required restaurants_price_level">
  <legend class="col-form-label pt-0">Price level <abbr title="required">*</abbr></legend>
  <input type="hidden" name="/restaurants[price_level]" value="">
  <div class="price-form">
    <% Restaurant::PRICE_LEVEL.each do |input| %>
      <div class="form-check">
        <input class="form-check-input radio_buttons required" type="radio" value="<%= input %>" name="/restaurants[price_level]" id="_restaurants_price_level_<%= input %>">
        <label class="form-check-label collection_radio_buttons" for="_restaurants_price_level_<%= input %>"><i class="fas fa-euro-sign"></i></label>
      </div>
    <% end %>
  </div>
</fieldset>

  <%= f.submit 'Apply filters' %>
<% end %>


</div>










<div class="container">
  <div class="cards">
    <% @results_restaurants.each do |result|%>
      <% if result.photo.attached? %>
        <div class="card-trip mx-3">
            <%= cl_image_tag result.photo.key , alt: "photo restaurant", crop: :fill %>
          <div class="card-trip-infos">
            <div>
              <p> <%= result.name %> </p>
              <% if result.rating %>
                <p>
                  <% result.rating.times do%>
                    <i class="fas fa-star"></i>
                  <% end %>
                  <% (5 - result.rating).times do %>
                    <i class="fas fa-star" id="level-missing"></i>
                  <% end %>
                </p>
              <% end %>
              <p> <%= result.short_address %></p>
            </div>
            <h2 class="card-trip-pricing"><%= ("€"*result.price_level.to_i) %></h2>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<!-- <div class="fixed-filter mt-4">
  <div class="btn-middle">
    <button type="button" class="btn-filter" data-toggle="modal" data-target="#exampleModalCenter">
      <i class="fas fa-filter"></i>
    </button>
  </div>
</div> -->

<!-- Modal filtre -->
<!-- <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="exampleModalCenterTitle">Filter Restaurants</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <%#= form_tag restaurants_path, method: :get do %>
        <div class="modal-body">
          <%#= select_tag :food_category,
            options_for_select(Restaurant::CATEGORY),
            include_blank: true,
            class: "form-control"
          %>
          <%#= select_tag :rating,
            options_for_select(Restaurant::RATINGS),
            class: "form-control"
          %>
          <%#= select_tag :price_level,
            options_for_select(Restaurant::PRICE_LEVEL),
            class: "form-control"
          %>
        </div>
        <div class="modal-footer">
          <%#= hidden_field_tag :event, @event.id %>
          <%#= submit_tag "Search", class: "btn btn-primary" %>
        </div>
      <%# end %>
    </div>
  </div>
</div>
 -->
